<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Má»™ng VÃµ Hiá»‡p â€“ Sá»­ Viá»‡t</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#020617;color:#fff}
h1,h2,h3{text-align:center;margin:6px}
.game{max-width:430px;margin:auto;padding:10px}
.panel{background:#1e293b;border-radius:14px;padding:10px;margin-bottom:10px}
.row{display:flex;gap:6px}
.col{flex:1}
img{width:100%;border-radius:10px}
button{width:100%;padding:10px;border:0;border-radius:10px;margin-top:5px}
.atk{background:#ef4444;color:#fff}
.skill{background:#3b82f6;color:#fff}
.map button{background:#16a34a;color:#fff}
.lock{background:#475569!important}
.hp{background:#334155;border-radius:8px;overflow:hidden;height:14px}
.hp div{height:14px;background:#22c55e}
.small{font-size:13px;color:#cbd5f5}
.hide{display:none}
</style>
</head>

<body>

<h1>ğŸ‡»ğŸ‡³ Má»™ng VÃµ Hiá»‡p â€“ Sá»­ Viá»‡t ğŸ‡»ğŸ‡³</h1>

<div class="game">

<!-- Äá»˜I HÃŒNH -->
<div class="panel">
<h2>ğŸ‘¥ Äá»™i hÃ¬nh (3 tÆ°á»›ng)</h2>
<select onchange="chonTuong(this.value)">
<option value="tranquocto">Tráº§n Quá»‘c Toáº£n</option>
<option value="tranhungdao">Tráº§n HÆ°ng Äáº¡o</option>
<option value="ngoquyen">NgÃ´ Quyá»n</option>
<option value="quangtrung">Quang Trung</option>
<option value="lythuongkiet">LÃ½ ThÆ°á»ng Kiá»‡t</option>
<option value="thanhgiong">ThÃ¡nh GiÃ³ng</option>
<option value="laclongquan">Láº¡c Long QuÃ¢n</option>
</select>

<h3 id="tenTuong"></h3>
<img id="anhTuong">
<div class="hp"><div id="hpTuong"></div></div>
<p class="small">â­ Sao: <span id="sao"></span></p>
<p><b>ChiÃªu:</b> <span id="chieu"></span></p>
</div>

<!-- TRANG Bá»Š -->
<div class="panel">
<h2>ğŸ’ Trang bá»‹</h2>
<p id="tb"></p>
</div>

<!-- BOSS -->
<div class="panel">
<h2 id="tenBoss"></h2>
<img id="anhBoss">
<div class="hp"><div id="hpBoss"></div></div>
</div>

<button class="atk" onclick="danh()">âš”ï¸ ÄÃ¡nh thÆ°á»ng</button>
<button class="skill" onclick="dungChieu()">ğŸ”¥ DÃ¹ng chiÃªu</button>

<!-- MAP -->
<div class="panel map">
<h2>ğŸ—ºï¸ Báº£n Ä‘á»“</h2>
<div id="map"></div>
</div>

<p id="log" class="small"></p>

</div>

<script>
/* ====== CHá»NG NGHIá»†N ====== */
let playTime=localStorage.playTime?parseInt(localStorage.playTime):0;
let lastPlay=localStorage.lastPlay?parseInt(localStorage.lastPlay):Date.now();
if(Date.now()-lastPlay>3600000)playTime=0;
setInterval(()=>{
  playTime++;
  localStorage.playTime=playTime;
  localStorage.lastPlay=Date.now();
  if(playTime>=120){
    alert("â›” Báº¡n Ä‘Ã£ chÆ¡i quÃ¡ 120 phÃºt. Vui lÃ²ng quay láº¡i sau 1 giá».");
    document.body.innerHTML="";
  }
},60000);

/* ====== Dá»® LIá»†U TÆ¯á»šNG ====== */
const tuong={
tranquocto:{ten:"Tráº§n Quá»‘c Toáº£n",hp:100,chieu:"HÃ o KhÃ­ Äáº¡i Viá»‡t",sao:5,tb:"ğŸŠ Cam Truyá»n Quá»‘c â­â­â­â­â­"},
tranhungdao:{ten:"Tráº§n HÆ°ng Äáº¡o",hp:140,chieu:"Váº¡n Kiáº¿p Tráº­n",sao:5,tb:"âš”ï¸ Kiáº¿m Váº¡n Kiáº¿p â­â­â­â­â­"},
ngoquyen:{ten:"NgÃ´ Quyá»n",hp:130,chieu:"Báº¡ch Äáº±ng Giang",sao:4,tb:"ğŸ›¡ï¸ Cá»c Gá»— Báº¡ch Äáº±ng"},
quangtrung:{ten:"Quang Trung",hp:120,chieu:"HÃ nh QuÃ¢n Tháº§n Tá»‘c",sao:4,tb:"ğŸ Chiáº¿n MÃ£ TÃ¢y SÆ¡n"},
lythuongkiet:{ten:"LÃ½ ThÆ°á»ng Kiá»‡t",hp:125,chieu:"Nam Quá»‘c SÆ¡n HÃ ",sao:4,tb:"ğŸ“œ ThiÃªn ThÆ°"},
thanhgiong:{ten:"ThÃ¡nh GiÃ³ng",hp:160,chieu:"ThiÃªn MÃ£ Xung ThiÃªn",sao:5,tb:"ğŸ´ ThiÃªn MÃ£ ThÃ¡nh GiÃ¡p â­â­â­â­â­"},
laclongquan:{ten:"Láº¡c Long QuÃ¢n",hp:180,chieu:"Há»“ng Thá»§y Khai ThiÃªn",sao:5,tb:"ğŸ‰ Long Tháº§n PhÃ¡p Báº£o â­â­â­â­â­"}
};

/* ====== MAP ====== */
const mapBoss=[
{name:"Thá»• Phá»‰",hp:80},
{name:"SÆ¡n Tinh",hp:120},
{name:"Thá»§y Tinh",hp:160},
{name:"Thuá»“ng Luá»“ng",hp:220},
{name:"Ngoáº¡i XÃ¢m",hp:300}
];

/* ====== TRáº NG THÃI ====== */
let cur=tuong.tranquocto;
let hpT=cur.hp;
let ai=0;
let hpB=mapBoss[0].hp;
let luotAi=localStorage.ai?parseInt(localStorage.ai):0;
let lanVuot=localStorage.lanVuot?JSON.parse(localStorage.lanVuot):{};

/* ====== HÃ€M ====== */
function chonTuong(id){
cur=tuong[id];
hpT=cur.hp;
capNhat();
}

function capNhat(){
tenTuong.innerText=cur.ten;
anhTuong.src="https://i.imgur.com/3Qy4QwT.png";
chieu.innerText=cur.chieu;
sao.innerText="â­".repeat(cur.sao);
tb.innerText=cur.sao>=5?cur.tb:"ğŸ”’ Má»Ÿ khi 5 sao";
hpTuong.style.width=(hpT/cur.hp*100)+"%";

tenBoss.innerText=mapBoss[ai].name;
anhBoss.src="https://i.imgur.com/YZ6G7yQ.png";
hpBoss.style.width=(hpB/mapBoss[ai].hp*100)+"%";

map.innerHTML="";
mapBoss.forEach((m,i)=>{
let b=document.createElement("button");
b.innerText="áº¢i "+(i+1);
if(i>ai)b.className="lock";
else b.onclick=()=>vaoAi(i);
map.appendChild(b);
});
}

function vaoAi(i){
let today=new Date().toDateString();
lanVuot[today]=lanVuot[today]||{};
lanVuot[today][i]=lanVuot[today][i]||0;
if(lanVuot[today][i]>=2){
alert("â›” áº¢i nÃ y chá»‰ vÆ°á»£t tá»‘i Ä‘a 2 láº§n/ngÃ y");
return;
}
ai=i;
hpB=mapBoss[i].hp;
capNhat();
}

function danh(){
hpB-=Math.random()*15+10;
phanCong();
kiemTra();
capNhat();
}

function dungChieu(){
hpB-=Math.random()*30+25;
phanCong();
kiemTra();
capNhat();
}

function phanCong(){
hpT-=Math.random()*12+8;
}

function kiemTra(){
if(hpB<=0){
alert("ğŸ† Qua áº£i!");
let today=new Date().toDateString();
lanVuot[today][ai]=(lanVuot[today][ai]||0)+1;
localStorage.lanVuot=JSON.stringify(lanVuot);
if(ai<mapBoss.length-1)ai++;
hpB=mapBoss[ai].hp;
}
if(hpT<=0){
alert("ğŸ’€ Tháº¥t báº¡i!");
hpT=cur.hp;
hpB=mapBoss[ai].hp;
}
}

capNhat();
</script>

</body>
</html>
